<html>
  <head>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link
      rel="stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css2?display=swap&amp;family=Noto+Sans%3Awght%40400%3B500%3B700%3B900&amp;family=Plus+Jakarta+Sans%3Awght%40400%3B500%3B700%3B800"
    />

    <title>Cook</title>
    <link rel="icon" type="image/x-icon" href="https://is3-ssl.mzstatic.com/image/thumb/Purple111/v4/7d/05/17/7d0517b1-f45f-af98-bf8f-87d454ca57f6/source/512x512bb.jpg" />

    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
  </head>
  <body>
    <div class="relative flex size-full min-h-screen flex-col bg-[#FFFFFF] group/design-root overflow-x-hidden" style='font-family: "Plus Jakarta Sans", "Noto Sans", sans-serif;'>
      <div class="layout-container flex h-full grow flex-col">
        <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#F4EFE6] px-10 py-3">
          <div class="flex items-center gap-4 text-[#1C160C]">
            <div class="size-4">
              <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path
                  d="M24 4C25.7818 14.2173 33.7827 22.2182 44 24C33.7827 25.7818 25.7818 33.7827 24 44C22.2182 33.7827 14.2173 25.7818 4 24C14.2173 22.2182 22.2182 14.2173 24 4Z"
                  fill="currentColor"
                ></path>
              </svg>
            </div>
            <h2 class="text-[#1C160C] text-lg font-bold leading-tight tracking-[-0.015em]">EasyCart</h2>
          </div>
          <div class="flex gap-2">
            <a href="Afterlogin.html">
            <button
              class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 px-4 bg-[#019863] text-[#FFFFFF] text-sm font-bold leading-normal tracking-[0.015em]"
            >
                
              <span class="truncate">Home</span>
            </button></a>
          <div class="flex gap-2">
            <a href="Recipes.html">
            <button
              class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 px-4 bg-[#019863] text-[#FFFFFF] text-sm font-bold leading-normal tracking-[0.015em]"
            >
                
              <span class="truncate">Back</span>
            </button></a>
        </header>
        <div class="px-40 flex flex-1 justify-center py-5">
          <div class="layout-content-container flex flex-col max-w-[960px] flex-1">
            <div class="@container">
              <div class="@[480px]:px-4 @[480px]:py-3">
                <div
                  class="bg-cover bg-center flex flex-col justify-end overflow-hidden bg-[#FFFFFF] @[480px]:rounded-xl min-h-[218px]"
                  style='background-image: linear-gradient(0deg, rgba(0, 0, 0, 0.4) 0%, rgba(0, 0, 0, 0) 25%), url("https://cdn.usegalileo.ai/sdxl10/b7d4304c-d1cd-4f83-aba0-564a94994d60.png");'
                >
                  <div class="flex p-4"><p id="recipe-name" class="text-white tracking-light text-[28px] font-bold leading-tight">Tomato Soup</p></div>
                </div>
              </div>
            </div>
            <div id="recipe-details" class="w-full max-w-lg mx-auto p-4 border border-[#E9DFCE] rounded-lg bg-[#F4EFE6] text-[#1C160C]">
              <!-- Description -->
              <p id="description" class="text-lg font-semibold text-center mb-2"></p>
          
              <!-- Cooking Time & Servings -->
              <div class="flex justify-between text-sm font-medium mb-2">
                  <span><strong>Cooking Time: </strong><span id="cooking-time"></span>s</span>
                  <span><strong>Servings: </strong><span id="servings"></span></span>
              </div>
          
              <!-- Proteins & Calories -->
              <div class="flex justify-between text-sm font-medium mb-2">
                  <span><strong>Protein: </strong><span id="protien"></span>&nbsp;g</span>
                  <span><strong>Calories: </strong><span id="calories"></span></span>
              </div>
          
              <!-- Fats, Carbs & Fiber -->
              <div class="flex justify-between text-sm font-medium">
                  <span><strong>Fats: </strong><span id="fats"></span>&nbsp;g</span>
                  <span><strong>Carbs: </strong><span id="carbs"></span>&nbsp;g</span>
                  <span><strong>Fiber:</strong> <span id="fiber"></span>&nbsp;g</span>
              </div>
          </div>
          
            <h1 class="text-[#1C160C] tracking-light text-[32px] font-bold leading-tight px-4 text-center pb-3 pt-6">Cooking</h1>
            <div class="flex items-center gap-4 bg-[#FFFFFF] px-4 min-h-[72px] py-2">
              <div class="text-[#1C160C] flex items-center justify-center rounded-lg bg-[#F4EFE6] shrink-0 size-12" data-icon="FileSvg" data-size="24px" data-weight="regular">
                <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                  <path
                    d="M87.82,196.31a20.82,20.82,0,0,1-9.19,15.23C73.44,215,67,216,61.14,216A61.23,61.23,0,0,1,46,214a8,8,0,0,1,4.3-15.41c4.38,1.2,14.95,2.7,19.55-.36.88-.59,1.83-1.52,2.14-3.93.35-2.67-.71-4.1-12.78-7.59-9.35-2.7-25-7.23-23-23.11a20.55,20.55,0,0,1,9-14.95c11.84-8,30.72-3.31,32.83-2.76a8,8,0,0,1-4.07,15.48c-4.48-1.17-15.23-2.56-19.83.56a4.54,4.54,0,0,0-2,3.67c-.11.9-.14,1.09,1.12,1.9,2.31,1.49,6.44,2.68,10.45,3.84C73.5,174.17,90.06,179,87.82,196.31ZM216,88v24a8,8,0,0,1-16,0V96H152a8,8,0,0,1-8-8V40H56v72a8,8,0,1,1-16,0V40A16,16,0,0,1,56,24h96a8,8,0,0,1,5.65,2.34l56,56A8,8,0,0,1,216,88Zm-56-8h28.69L160,51.31Zm-13.3,64.47a8,8,0,0,0-10.23,4.84L124,184.21l-12.47-34.9a8,8,0,1,0-15.06,5.38l20,56a8,8,0,0,0,15.07,0l20-56A8,8,0,0,0,146.7,144.47ZM208,176h-8a8,8,0,0,0,0,16v5.29a13.38,13.38,0,0,1-8,2.71c-8.82,0-16-9-16-20s7.18-20,16-20a13.27,13.27,0,0,1,7.53,2.38,8,8,0,0,0,8.95-13.26A29.38,29.38,0,0,0,192,144c-17.64,0-32,16.15-32,36s14.36,36,32,36a30.06,30.06,0,0,0,21.78-9.6,8,8,0,0,0,2.22-5.53V184A8,8,0,0,0,208,176Z"
                  ></path>
                </svg>
              </div>
              <div class="flex flex-col justify-center">
                <p class="text-[#1C160C] text-base font-medium leading-normal line-clamp-1">Ingredients</p>
                <p class="text-[#A18249] text-sm font-normal leading-normal line-clamp-2">List of ingredients with quantities</p>
              </div>
            </div>
            <div class="p-4 grid grid-cols-[20%_1fr] gap-x-6">
              <div id="ingredients-container" class="p-4 grid grid-cols-[20%_1fr] gap-x-6"></div>
            </div>
            <h2 class="text-[#1C160C] text-[22px] font-bold leading-tight tracking-[-0.015em] px-4 pb-3 pt-5">Instructions</h2>
            <div id="procedure-container"></div>

            <!-- <div class="flex items-center gap-4 bg-[#FFFFFF] px-4 min-h-14">
              <div class="text-[#1C160C] flex items-center justify-center rounded-lg bg-[#F4EFE6] shrink-0 size-10" data-icon="Dot" data-size="24px" data-weight="regular">
                <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                  <path d="M140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128Z"></path>
                </svg>
              </div>
              <p class="text-[#1C160C] text-base font-normal leading-normal flex-1 truncate">1. Heat butter in a pan.</p>
            </div>
            <div class="flex items-center gap-4 bg-[#FFFFFF] px-4 min-h-14">
              <div class="text-[#1C160C] flex items-center justify-center rounded-lg bg-[#F4EFE6] shrink-0 size-10" data-icon="Dot" data-size="24px" data-weight="regular">
                <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                  <path d="M140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128Z"></path>
                </svg>
              </div>
              <p class="text-[#1C160C] text-base font-normal leading-normal flex-1 truncate">2. Add tomatoes and cook for 5 minutes.</p>
            </div>
            <div class="flex items-center gap-4 bg-[#FFFFFF] px-4 min-h-14">
              <div class="text-[#1C160C] flex items-center justify-center rounded-lg bg-[#F4EFE6] shrink-0 size-10" data-icon="Dot" data-size="24px" data-weight="regular">
                <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                  <path d="M140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128Z"></path>
                </svg>
              </div>
              <p class="text-[#1C160C] text-base font-normal leading-normal flex-1 truncate">3. Add eggs and cook until done.</p>
            </div>
            <div class="flex items-center gap-4 bg-[#FFFFFF] px-4 min-h-14">
              <div class="text-[#1C160C] flex items-center justify-center rounded-lg bg-[#F4EFE6] shrink-0 size-10" data-icon="Dot" data-size="24px" data-weight="regular">
                <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                  <path d="M140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128Z"></path>
                </svg>
              </div>
              <p class="text-[#1C160C] text-base font-normal leading-normal flex-1 truncate">4. Season with salt.</p>
            </div> -->
            <div class="flex justify-stretch">
              <div class="flex flex-1 gap-3 flex-wrap px-4 py-3 justify-between">
                <button
                  class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 px-4 bg-[#019863] text-[#FFFFFF] text-sm font-bold leading-normal tracking-[0.015em]"
                >
                  <span class="truncate">Text-to-Speech</span>
                </button>
                <button id="watch-button"
                  class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-full h-10 px-4 bg-[#F4EFE6] text-[#1C160C] text-sm font-bold leading-normal tracking-[0.015em]"
                >
                  <span class="truncate">Watch Video</span>
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
document.addEventListener("DOMContentLoaded", function () { 
    const ingredientsContainer = document.getElementById("ingredients-container");

    if (!ingredientsContainer) {
        console.error("Error: Element with ID 'ingredients-container' not found in the DOM.");
        return;
    }

    const urlParams = new URLSearchParams(window.location.search);
    const recipeId = urlParams.get("recipe_id");

    // console.log("Received Recipe ID:", recipeId);

    if (!recipeId) {
        ingredientsContainer.innerHTML = "<p class='text-center py-4 text-gray-500'>Recipe ID not found.</p>";
        return;
    }

    fetch(`http://localhost:5000/api/ingredients/${recipeId}`)
        .then(response => response.json())
        .then(data => {
            ingredientsContainer.innerHTML = "";

            if (!data || data.length === 0) {
                ingredientsContainer.innerHTML = `<p class="text-center py-4 text-gray-500">No ingredients found.</p>`;
                return;
            }

            data.forEach(ingredient => {
                const ingredientDiv = document.createElement("div");
                ingredientDiv.classList.add("col-span-2", "grid", "grid-cols-subgrid", "border-t", "border-t-[#E9DFCE]", "py-5");

                ingredientDiv.innerHTML = `
    <table class="w-full border-collapse border border-[#E9DFCE] text-center">
        <tr class="bg-[#F4EFE6]">
            <th class="border border-[#E9DFCE] px-4 py-2 text-[#A18249]">${ingredient.ingredient_name}</th>
            <th class="border border-[#E9DFCE] px-4 py-2 text-[#1C160C]">${ingredient.quantity}</th>
            <th class="border border-[#E9DFCE] px-4 py-2 text-[#1C160C]">${ingredient.unit || ''}</th>
        </tr>     
    </tbody>
</table>  `;
                ingredientsContainer.appendChild(ingredientDiv);
            });
        })
        .catch(error => {
            console.error("Error fetching ingredients:", error);
            ingredientsContainer.innerHTML = `<p class="text-center py-4 text-red-500">Error loading ingredients.</p>`;
        });
});
document.addEventListener("DOMContentLoaded", async function () {
    // ✅ Step 1: Get Recipe ID from URL
    const urlParams = new URLSearchParams(window.location.search);
    const recipeId = urlParams.get("recipe_id");

    if (!recipeId) {
        console.error("Recipe ID not found in URL.");
        return;
    }

    try {
        // ✅ Step 2: Fetch Recipe Details from Backend
        const response = await fetch(`http://localhost:5000/api/recipe_name/${recipeId}`);
        const data = await response.json();
        // console.log(data);
        if (!data || data.length === 0) {
            console.error("No recipe found.");
            return;
        }

        const recipe = data[0]; // Assuming only one record is fetched

        // ✅ Step 3: Populate Data in HTML
        document.getElementById("recipe-name").textContent = recipe.recipe_name || "N/A";
        document.getElementById("description").textContent = recipe.descr || "N/A";
        document.getElementById("cooking-time").textContent = (recipe.cooking_time ? `${recipe.cooking_time} minutes` : "N/A");
        document.getElementById("servings").textContent = recipe.default_servings || "N/A";
        document.getElementById("calories").textContent = (recipe.calories ? `${recipe.calories} (kcal)` : "N/A");
        document.getElementById("protien").textContent = recipe.protein || "N/A";
        document.getElementById("carbs").textContent = recipe.carbs || "N/A";
        document.getElementById("fats").textContent = recipe.fats || "N/A";
        document.getElementById("fiber").textContent = recipe.fiber || "N/A";
        const video = recipe.video_link; 
        console.log(video);
        const watchButton = document.getElementById("watch-button");
        if (watchButton) {
            watchButton.addEventListener("click", () => {
                if (video) {
                    window.open(video, "_blank"); // Open the video link in a new tab
                } else {
                    console.error("No video link found for this recipe.");
                }
            });
        } else {
            console.error("Watch button not found.");
        }
        const proced = recipe.proced;
        // Container where the steps will be appended
        const procedureContainer = document.getElementById("procedure-container");

        // Split the procedure steps by commas
        const procedureSteps = proced.split(",");

        // Generate and append the HTML for each step dynamically
        procedureSteps.forEach((step, index) => {
        const stepHtml = `
            <div class="flex items-center gap-4 bg-[#FFFFFF] px-4 min-h-14">
                <div class="text-[#1C160C] flex items-center justify-center rounded-lg bg-[#F4EFE6] shrink-0 size-10" data-icon="Dot" data-size="24px" data-weight="regular">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24px" height="24px" fill="currentColor" viewBox="0 0 256 256">
                        <path d="M140,128a12,12,0,1,1-12-12A12,12,0,0,1,140,128Z"></path>
                    </svg>
                </div>
                <p class="text-[#1C160C] text-base font-normal leading-normal flex-1 truncate">${step.trim()}</p>
            </div>
        `;
        procedureContainer.innerHTML += stepHtml; // Append the generated HTML to the container
    });
        // ✅ Step 4: Set Background Image Dynamically
        const imageContainer = document.querySelector(".bg-cover");
        if (imageContainer && recipe.recipe_image) {
            imageContainer.style.backgroundImage = `
                linear-gradient(0deg, rgba(0, 0, 0, 0.4) 0%, rgba(0, 0, 0, 0) 25%), 
                url('https://static.vecteezy.com/system/resources/previews/002/233/113/non_2x/restaurant-service-abstract-logo-template-symbol-icon-free-vector.jpg')
            `;
        }

    } catch (error) {
        console.error("Error fetching recipe details:", error);
    }
});
    </script>
  </body>
</html>
